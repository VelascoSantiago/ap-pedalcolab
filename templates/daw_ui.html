<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedalcolab - DAW</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div id="daw-app">
        <div class="container">
            <div class="panel tracks-panel">
                <div class="logo-container">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" 
                        alt="Logo de Pedalcolab" 
                        style="filter: invert(1); max-width: 120px;">
                </div>
                <h2>Librería de Pistas</h2>
                
                <h3>Pistas Crudas (Subidas)</h3>
            <ul id="raw-tracks-list">
                
                {% for track in raw_tracks %}
                    <li class="track-item">
                        <span>{{ track }}</span>
                        <audio controls src="{{ url_for('download_raw', filename=track) }}"></audio>
                    </li>
                {% endfor %}
                </ul>

                <h3>Pistas Procesadas (FX)</h3>
                <ul class="track-list">
                    {% for track in processed_tracks %}
                        <li class="track-item">
                            <div class="file-name">{{ track }}</div>
                            <audio controls src="/download/fx/{{ track }}"></audio>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="panel effects-panel">
                <h1>Panel de Efectos</h1>
                <form id="effects-form" method="post" action="">
                    
                    <div id="selected-track-display">Selecciona una pista cruda para procesar</div>

                    <div class="effect-control">
                        <label for="dist">Distorsión (Drive)</label>
                        <input type="range" id="dist" name="dist" min="0" max="1" step="0.01" value="0">
                    </div>
                    <div class="effect-control">
                        <label for="chorus">Chorus (Depth)</label>
                        <input type="range" id="chorus" name="chorus" min="0" max="1" step="0.01" value="0">
                    </div>
                    <div class="effect-control">
                        <label for="reverb">Reverb (Room Size)</label>
                        <input type="range" id="reverb" name="reverb" min="0" max="1" step="0.01" value="0">
                    </div>
                    <input type="submit" value="Procesar Pista" class="button">
                </form>
            </div>
        </div>
    </div>

    <script>
        function selectTrack(filename) {
            const form = document.getElementById('effects-form');
            form.action = '/process/' + filename;
            document.getElementById('selected-track-display').textContent = 'Procesando: ' + filename;

            document.querySelectorAll('#raw-tracks-list li').forEach(item => {
                item.classList.toggle('selected', item.textContent === filename);
            });
        }
    </script>
</body>
</html>